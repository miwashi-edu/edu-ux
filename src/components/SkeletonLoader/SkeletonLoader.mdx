import { Meta, Markdown } from '@storybook/addon-docs/blocks';
import * as SkeletonLoaderStories from './SkeletonLoader.stories.jsx';

<Meta of={SkeletonLoaderStories} />

# SkeletonLoader

A skeleton loader component for displaying placeholder content while loading with accessibility features, smooth animations, and multiple content types.

## What is a SkeletonLoader?

A skeleton loader is a UI component that displays placeholder content while the actual content is loading. It provides a better user experience than traditional loading spinners by:

- **Reducing perceived loading time** by showing content structure
- **Preventing layout shifts** when content loads
- **Maintaining visual hierarchy** during loading states
- **Providing visual feedback** that content is coming
- **Improving user engagement** by showing progress context

Skeleton loaders are commonly used for:
- **Content pages**: Blog posts, articles, product pages
- **Data tables**: User lists, transaction history, analytics
- **Social media feeds**: Posts, comments, user profiles
- **E-commerce**: Product grids, search results, category pages
- **Dashboards**: Charts, metrics, status cards
- **Forms**: Multi-step processes, data entry screens

## Features

- **Multiple Content Types**: Text, avatar, image, button, card, list, table, and custom skeletons
- **Animation Variants**: Default, pulse, wave, and shimmer effects
- **Size Options**: Small, medium, and large skeleton elements
- **Accessibility**: Full ARIA support and screen reader compatibility
- **Responsive Design**: Mobile-first approach with adaptive sizing
- **Dark Mode**: Automatic dark mode support
- **Reduced Motion**: Respects user motion preferences
- **Flexible Layout**: Customizable dimensions and positioning

## Basic Usage

```jsx
import React, { useState, useEffect } from 'react';
import SkeletonLoader from './components/SkeletonLoader';

function ContentWithSkeleton() {
  const [isLoading, setIsLoading] = useState(true);
  const [content, setContent] = useState(null);

  useEffect(() => {
    // Simulate API call
    setTimeout(() => {
      setContent({ title: 'Loaded Content', text: 'Content here...' });
      setIsLoading(false);
    }, 2000);
  }, []);

  if (isLoading) {
    return (
      <div>
        <SkeletonLoader type="text" count={3} />
      </div>
    );
  }

  return (
    <div>
      <h1>{content.title}</h1>
      <p>{content.text}</p>
    </div>
  );
}
```

## Content Types

### Text Skeleton
For loading text content like paragraphs, titles, and descriptions.

```jsx
<SkeletonLoader
  type="text"
  count={3}
  variant="shimmer"
/>
```

### Avatar Skeleton
For loading user avatars and profile pictures.

```jsx
<SkeletonLoader
  type="avatar"
  count={5}
  size="medium"
/>
```

### Image Skeleton
For loading images, photos, and media content.

```jsx
<SkeletonLoader
  type="image"
  count={2}
  height="12rem"
/>
```

### Button Skeleton
For loading buttons and interactive elements.

```jsx
<SkeletonLoader
  type="button"
  count={3}
  width="8rem"
/>
```

### Card Skeleton
For loading card-based content like product cards or status cards.

```jsx
<SkeletonLoader
  type="card"
  count={2}
  height="16rem"
/>
```

### List Skeleton
For loading list items with avatars and text content.

```jsx
<SkeletonLoader
  type="list"
  count={4}
/>
```

### Table Skeleton
For loading data tables and structured content.

```jsx
<SkeletonLoader
  type="table"
  count={1}
  height="20rem"
/>
```

### Custom Skeleton
For loading custom-shaped content with flexible dimensions.

```jsx
<SkeletonLoader
  type="custom"
  count={2}
  width="200px"
  height="100px"
/>
```

## Animation Variants

### Default
Standard skeleton with subtle shimmer animation.

```jsx
<SkeletonLoader
  type="text"
  variant="default"
  count={3}
/>
```

### Pulse
Skeleton that pulses with opacity changes.

```jsx
<SkeletonLoader
  type="text"
  variant="pulse"
  count={3}
/>
```

### Wave
Skeleton with wave-like animation effect.

```jsx
<SkeletonLoader
  type="text"
  variant="wave"
  count={3}
/>
```

### Shimmer
Skeleton with smooth shimmer animation (most common).

```jsx
<SkeletonLoader
  type="text"
  variant="shimmer"
  count={3}
/>
```

## Sizes

### Small
Compact skeleton elements for space-constrained layouts.

```jsx
<SkeletonLoader
  type="text"
  size="small"
  count={3}
/>
```

### Medium (Default)
Standard skeleton size for most use cases.

```jsx
<SkeletonLoader
  type="text"
  size="medium"
  count={3}
/>
```

### Large
Prominent skeleton elements for important content areas.

```jsx
<SkeletonLoader
  type="text"
  size="large"
  count={3}
/>
```

## Real-World Examples

### Blog Post Loading
A complete blog post skeleton with author info, title, and content.

```jsx
function BlogPostSkeleton() {
  return (
    <div>
      {/* Author info */}
      <div style={{ display: 'flex', gap: '1rem', marginBottom: '2rem', alignItems: 'center' }}>
        <SkeletonLoader type="avatar" count={1} width="3rem" />
        <div style={{ flex: 1 }}>
          <SkeletonLoader type="text" count={1} height="1rem" />
        </div>
      </div>
      
      {/* Title */}
      <SkeletonLoader
        type="text"
        count={1}
        height="2rem"
        style={{ marginBottom: '1rem' }}
      />
      
      {/* Content */}
      <SkeletonLoader
        type="text"
        count={4}
        style={{ marginBottom: '2rem' }}
      />
      
      {/* Featured image */}
      <SkeletonLoader
        type="image"
        count={1}
        height="16rem"
        style={{ marginBottom: '2rem' }}
      />
      
      {/* More content */}
      <SkeletonLoader type="text" count={3} />
    </div>
  );
}
```

### Dashboard Loading
A dashboard skeleton with cards and data table.

```jsx
function DashboardSkeleton() {
  return (
    <div>
      {/* Stat cards */}
      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem', marginBottom: '2rem' }}>
        <SkeletonLoader type="card" count={1} height="8rem" />
        <SkeletonLoader type="card" count={1} height="8rem" />
        <SkeletonLoader type="card" count={1} height="8rem" />
        <SkeletonLoader type="card" count={1} height="8rem" />
      </div>
      
      {/* Data table */}
      <SkeletonLoader type="table" count={1} height="20rem" />
    </div>
  );
}
```

### User List Loading
A user list skeleton with avatars and user information.

```jsx
function UserListSkeleton() {
  return (
    <div>
      {Array.from({ length: 5 }).map((_, index) => (
        <div key={index} style={{ display: 'flex', gap: '1rem', marginBottom: '1rem', alignItems: 'center' }}>
          <SkeletonLoader type="avatar" count={1} width="3rem" />
          <div style={{ flex: 1 }}>
            <SkeletonLoader type="text" count={1} height="1rem" style={{ marginBottom: '0.5rem' }} />
            <SkeletonLoader type="text" count={1} height="0.75rem" width="60%" />
          </div>
        </div>
      ))}
    </div>
  );
}
```

## API Reference

### Props

<Markdown>{`
| Prop | Type | Default | Description |
|------|------|---------|-------------|
| \`type\` | \`'text' \\| 'avatar' \\| 'image' \\| 'button' \\| 'card' \\| 'list' \\| 'table' \\| 'custom'\` | \`'text'\` | Type of skeleton content to display |
| \`variant\` | \`'default' \\| 'pulse' \\| 'wave' \\| 'shimmer'\` | \`'default'\` | Visual variant of the skeleton |
| \`size\` | \`'small' \\| 'medium' \\| 'large'\` | \`'medium'\` | Size of the skeleton elements |
| \`animated\` | \`boolean\` | \`true\` | Whether to animate the skeleton |
| \`count\` | \`number\` | \`1\` | Number of skeleton items to display |
| \`width\` | \`string \\| number\` | \`'100%'\` | Width of the skeleton |
| \`height\` | \`string \\| number\` | \`'auto'\` | Height of the skeleton (for text type) |
| \`className\` | \`string\` | \`''\` | Additional CSS class name |
| \`style\` | \`object\` | \`{}\` | Additional inline styles |
| \`aria-label\` | \`string\` | \`'Loading content'\` | Accessibility label |
`}</Markdown>

## Best Practices

### Choose Appropriate Content Types
- **Text**: For paragraphs, titles, descriptions, and any text content
- **Avatar**: For user profile pictures and circular images
- **Image**: For photos, illustrations, and media content
- **Button**: For interactive elements and call-to-action buttons
- **Card**: For card-based layouts and content containers
- **List**: For list items with avatars and multiple text lines
- **Table**: For data tables and structured information
- **Custom**: For unique content shapes and custom layouts

### Use Appropriate Animation Variants
- **Shimmer**: Most common and widely accepted for general use
- **Pulse**: Good for subtle loading states and minimal interfaces
- **Wave**: Effective for drawing attention to loading areas
- **Default**: Use when you want minimal animation

### Consider Loading Duration
- **Short loads (< 1 second)**: Consider using spinners instead
- **Medium loads (1-3 seconds)**: Use skeleton loaders with shimmer
- **Long loads (> 3 seconds)**: Use skeleton loaders with progress indicators

### Maintain Visual Hierarchy
- Match skeleton dimensions to actual content
- Use consistent spacing and alignment
- Preserve the layout structure of the final content
- Consider the content flow and reading patterns

### Accessibility Considerations
- Always provide meaningful `aria-label` for screen readers
- Test with screen readers and keyboard navigation
- Ensure sufficient color contrast for skeleton elements
- Respect reduced motion preferences
- Provide alternative loading indicators for users who prefer them

### Performance Considerations
- Keep skeleton animations lightweight and smooth
- Avoid complex animations that might cause performance issues
- Consider disabling animations on low-end devices
- Use appropriate skeleton counts to avoid overwhelming the interface

### Mobile Considerations
- Ensure skeleton elements are appropriately sized for touch
- Test with different screen sizes and orientations
- Consider mobile-specific content patterns
- Optimize skeleton dimensions for mobile layouts

### Content-Specific Guidelines
- **Blog posts**: Show title, author info, and content structure
- **Product pages**: Display images, titles, prices, and descriptions
- **User lists**: Include avatars, names, and relevant details
- **Data tables**: Maintain column structure and row relationships
- **Dashboards**: Preserve card layouts and data visualization areas

### Integration with Loading States
- Use skeleton loaders for initial page loads
- Combine with progress indicators for long operations
- Provide clear loading state transitions
- Consider using skeleton loaders for infinite scroll content
- Implement proper error states when loading fails
