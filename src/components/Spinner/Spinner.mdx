import { Meta, Markdown } from '@storybook/addon-docs/blocks';
import * as SpinnerStories from './Spinner.stories.jsx';

<Meta of={SpinnerStories} />

# Spinner

A spinner component for indicating loading states with accessibility features, smooth animations, and multiple visual variants.

## What is a Spinner?

A spinner is a UI component that provides visual feedback during loading states. It indicates that a process is running and content is being loaded or processed. Spinners are essential for:

- **Providing immediate feedback** when operations start
- **Reducing perceived loading time** by showing activity
- **Preventing user confusion** during processing
- **Maintaining user engagement** during waits
- **Indicating system responsiveness** and activity

Spinners are commonly used for:
- **Button loading states**: Form submissions, API calls
- **Page loading**: Initial page loads, route transitions
- **Data fetching**: API requests, database queries
- **File operations**: Uploads, downloads, processing
- **Background tasks**: Calculations, data processing
- **Authentication**: Login, registration processes

## Features

- **Multiple Variants**: Default, dots, bars, pulse, ripple, grid, orbit, and custom spinners
- **Size Options**: Small, medium, and large spinner sizes
- **Color Themes**: Primary, secondary, success, warning, error, light, and dark
- **Animation Speeds**: Slow, normal, and fast animation durations
- **Accessibility**: Full ARIA support and screen reader compatibility
- **Responsive Design**: Mobile-first approach with adaptive sizing
- **Dark Mode**: Automatic dark mode support
- **Reduced Motion**: Respects user motion preferences

## Basic Usage

```jsx
import React, { useState } from 'react';
import Spinner from './components/Spinner';

function LoadingButton() {
  const [isLoading, setIsLoading] = useState(false);

  const handleSubmit = async () => {
    setIsLoading(true);
    // Simulate API call
    await new Promise(resolve => setTimeout(resolve, 2000));
    setIsLoading(false);
  };

  return (
    <button 
      onClick={handleSubmit}
      disabled={isLoading}
    >
      {isLoading && <Spinner size="small" color="light" />}
      {isLoading ? 'Processing...' : 'Submit'}
    </button>
  );
}
```

## Variants

### Default
Classic circular spinner with rotating border.

```jsx
<Spinner
  variant="default"
  size="medium"
  color="primary"
/>
```

### Dots
Three dots that pulse in sequence.

```jsx
<Spinner
  variant="dots"
  size="medium"
  color="primary"
/>
```

### Bars
Five vertical bars that animate in sequence.

```jsx
<Spinner
  variant="bars"
  size="medium"
  color="primary"
/>
```

### Pulse
Single dot that pulses with opacity changes.

```jsx
<Spinner
  variant="pulse"
  size="medium"
  color="primary"
/>
```

### Ripple
Concentric circles that expand outward.

```jsx
<Spinner
  variant="ripple"
  size="medium"
  color="primary"
/>
```

### Grid
3x3 grid of dots that animate in sequence.

```jsx
<Spinner
  variant="grid"
  size="medium"
  color="primary"
/>
```

### Orbit
Two rotating rings with dots.

```jsx
<Spinner
  variant="orbit"
  size="medium"
  color="primary"
/>
```

### Custom
Custom spinner with unique animation.

```jsx
<Spinner
  variant="custom"
  size="medium"
  color="primary"
/>
```

## Sizes

### Small
Compact spinner for inline use and buttons.

```jsx
<Spinner
  size="small"
  variant="default"
  color="primary"
/>
```

### Medium (Default)
Standard spinner size for most use cases.

```jsx
<Spinner
  size="medium"
  variant="default"
  color="primary"
/>
```

### Large
Prominent spinner for page-level loading states.

```jsx
<Spinner
  size="large"
  variant="default"
  color="primary"
/>
```

## Colors

### Primary
Default blue color for general loading states.

```jsx
<Spinner color="primary" />
```

### Secondary
Gray color for secondary loading states.

```jsx
<Spinner color="secondary" />
```

### Success
Green color for successful operations.

```jsx
<Spinner color="success" />
```

### Warning
Yellow color for operations that need attention.

```jsx
<Spinner color="warning" />
```

### Error
Red color for error states or failed operations.

```jsx
<Spinner color="error" />
```

### Light
White color for dark backgrounds.

```jsx
<Spinner color="light" />
```

### Dark
Dark color for light backgrounds.

```jsx
<Spinner color="dark" />
```

## Animation Speeds

### Slow
Slower animation for longer operations.

```jsx
<Spinner speed="slow" />
```

### Normal (Default)
Standard animation speed.

```jsx
<Spinner speed="normal" />
```

### Fast
Faster animation for quick operations.

```jsx
<Spinner speed="fast" />
```

## Real-World Examples

### Button Loading State
A button that shows a spinner during form submission.

```jsx
function SubmitButton() {
  const [isLoading, setIsLoading] = useState(false);

  const handleSubmit = async () => {
    setIsLoading(true);
    try {
      await submitForm();
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <button
      onClick={handleSubmit}
      disabled={isLoading}
      style={{
        display: 'inline-flex',
        alignItems: 'center',
        gap: '0.5rem',
        padding: '0.75rem 1.5rem',
        backgroundColor: isLoading ? '#6b7280' : '#3b82f6',
        color: 'white',
        border: 'none',
        borderRadius: '4px',
        cursor: isLoading ? 'not-allowed' : 'pointer'
      }}
    >
      {isLoading && (
        <Spinner
          size="small"
          color="light"
          variant="default"
        />
      )}
      {isLoading ? 'Processing...' : 'Submit'}
    </button>
  );
}
```

### Page Loading Overlay
A full-screen loading overlay for page transitions.

```jsx
function PageLoader({ isLoading, children }) {
  if (isLoading) {
    return (
      <div style={{
        position: 'fixed',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: 'rgba(255, 255, 255, 0.9)',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '1rem',
        zIndex: 1000
      }}>
        <Spinner
          size="large"
          variant="ripple"
          color="primary"
          label="Page loading"
        />
        <p>Loading your content...</p>
      </div>
    );
  }

  return children;
}
```

### Inline Loading
A spinner used inline with text content.

```jsx
function LoadingText() {
  return (
    <p>
      Loading data
      <Spinner
        size="small"
        variant="dots"
        color="primary"
        style={{ marginLeft: '0.5rem' }}
      />
    </p>
  );
}
```

### Loading List
A list with loading indicators for each item.

```jsx
function LoadingList() {
  const items = ['Item 1', 'Item 2', 'Item 3'];
  
  return (
    <ul>
      {items.map((item, index) => (
        <li key={index} style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
          <Spinner size="small" variant="bars" />
          {item}
        </li>
      ))}
    </ul>
  );
}
```

## API Reference

### Props

<Markdown>{`
| Prop | Type | Default | Description |
|------|------|---------|-------------|
| \`variant\` | \`'default' \\| 'dots' \\| 'bars' \\| 'pulse' \\| 'ripple' \\| 'grid' \\| 'orbit' \\| 'custom'\` | \`'default'\` | Visual variant of the spinner |
| \`size\` | \`'small' \\| 'medium' \\| 'large'\` | \`'medium'\` | Size of the spinner |
| \`color\` | \`'primary' \\| 'secondary' \\| 'success' \\| 'warning' \\| 'error' \\| 'light' \\| 'dark'\` | \`'primary'\` | Color theme of the spinner |
| \`speed\` | \`'slow' \\| 'normal' \\| 'fast'\` | \`'normal'\` | Animation speed of the spinner |
| \`label\` | \`string\` | \`'Loading...'\` | Accessible label for screen readers |
| \`className\` | \`string\` | \`''\` | Additional CSS class name |
| \`style\` | \`object\` | \`{}\` | Additional inline styles |
| \`aria-label\` | \`string\` | \`undefined\` | Accessibility label (overrides label prop) |
`}</Markdown>

## Best Practices

### Choose Appropriate Variants
- **Default**: Most common and widely recognized
- **Dots**: Good for inline use and subtle loading states
- **Bars**: Effective for data loading and progress indication
- **Pulse**: Simple and clean for minimal interfaces
- **Ripple**: Good for page-level loading and transitions
- **Grid**: Unique and engaging for longer operations
- **Orbit**: Complex and eye-catching for important operations
- **Custom**: Use for brand-specific loading states

### Use Appropriate Sizes
- **Small**: For buttons, inline text, and compact spaces
- **Medium**: For most general loading states
- **Large**: For page-level loading and important operations

### Choose Colors Wisely
- **Primary**: General loading states and neutral operations
- **Secondary**: Less important or background operations
- **Success**: Operations that are completing successfully
- **Warning**: Operations that need attention or are taking longer
- **Error**: Failed operations or error states
- **Light/Dark**: Based on background contrast needs

### Consider Animation Speed
- **Slow**: For operations that take 5+ seconds
- **Normal**: For most operations (1-5 seconds)
- **Fast**: For quick operations under 1 second

### Accessibility Guidelines
- Always provide meaningful `label` for screen readers
- Use `aria-live="polite"` for non-intrusive announcements
- Test with screen readers and keyboard navigation
- Ensure sufficient color contrast for all color variants
- Respect reduced motion preferences
- Provide alternative loading indicators when needed

### Performance Considerations
- Keep spinner animations lightweight and smooth
- Avoid complex animations that might cause performance issues
- Consider disabling animations on low-end devices
- Use appropriate spinner sizes to avoid layout shifts

### Mobile Considerations
- Ensure spinner touch targets are appropriately sized
- Test with different screen sizes and orientations
- Consider mobile-specific loading patterns
- Optimize spinner dimensions for mobile layouts

### Loading Duration Guidelines
- **Short loads (< 1 second)**: Consider no spinner or very subtle indication
- **Medium loads (1-3 seconds)**: Use standard spinners with labels
- **Long loads (> 3 seconds)**: Use spinners with progress indicators or estimated time

### Context-Specific Usage
- **Buttons**: Use small spinners with light color on dark buttons
- **Pages**: Use large spinners with descriptive labels
- **Inline**: Use small spinners that don't disrupt text flow
- **Cards**: Use medium spinners with appropriate color themes
- **Lists**: Use small spinners for individual item loading

### Integration with Other Components
- Combine with progress bars for long operations
- Use with skeleton loaders for content loading
- Integrate with toast notifications for operation feedback
- Consider using spinners with cancel buttons for long operations
